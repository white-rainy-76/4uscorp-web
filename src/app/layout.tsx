import './globals.css'
import type { Metadata } from 'next'
import { Poppins as FontSans } from 'next/font/google'
import { cn } from '@/shared/ui/utils'
import { DictionaryProvider, ThemeProvider, SocketProvider } from './providers'
import { getDictionary } from '@/shared/config/i18n'
import { QueryClientProvider } from '@tanstack/react-query'
import { queryClient } from '@/shared/api/query-client'
import { ReactQueryDevtools } from '@tanstack/react-query-devtools'

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

const fontSans = FontSans({
  subsets: ['latin'],
  weight: ['400', '700'],
  variable: '--font-sans',
})

export default async function RootLayout({
  children,
  lang,
}: Readonly<{
  children: React.ReactNode
  lang: string
}>) {
  return (
    <html lang={lang}>
      <body
        className={cn(
          'min-h-screen bg-background font-sans antialiased',
          fontSans.variable,
        )}>
        <QueryClientProvider client={queryClient}>
          <SocketProvider>
            <ThemeProvider>
              <DictionaryProvider
                lang={'en'}
                initialDictionary={await getDictionary('en')}>
                {children}
              </DictionaryProvider>
            </ThemeProvider>
            <ReactQueryDevtools initialIsOpen={false} />
          </SocketProvider>
        </QueryClientProvider>
      </body>
    </html>
  )
}
